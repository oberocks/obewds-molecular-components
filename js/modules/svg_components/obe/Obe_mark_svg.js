//import { apply_attributes, insert_text } from './utilities/dom_generation.js';
import { settings_merge } from '../../helpers/settings_merge.js';

export class Obe_mark_svg {

    constructor (opts = false) {

        // set defaults
        this._defaults = {
            classes : {
                outlines_and_letters : 'fill-black',
                overlaps : 'fill-orange-300',
                letter_opacity : 'opacity-65',
                panel_o : 'fill-azure-300',
                panel_b : 'fill-green-300',
                panel_e : 'fill-rose-300',
                center : 'fill-yellow-300'
            }
        };

        // merge any passed options settings into the default settings to get a final settings object
        this.defaults = (opts) ? settings_merge(this._defaults, opts) : this._defaults;

        // clear original defaults
        this._defaults = null;

    }

    get_class_defaults () {
        
        return this.defaults;
    
    }

    get_merged_options (options) {
        
        return settings_merge(this.defaults, options);
    
    }

    generate (options = false) {

        // merge any passed options settings into the default settings to get a final settings object
        let opts = (options) ? settings_merge(this.defaults, options) : this.defaults;

        // create the element
        let output = `
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 737.38 737.38" xml:space="preserve">
    <path class="${opts.classes.overlaps}" d="M245.36 449.28c11.7-70.94 53.64-131.81 112.1-168.88-32.83-17.29-70.18-27.09-109.79-27.09-40.85 0-79.32 10.42-112.88 28.74 10.34 70.68 52.08 131.32 110.57 167.23z"/>
    <path class="${opts.classes.panel_o}" d="M368.69 273.69c35.81-20.14 77.09-31.65 121.02-31.65 41.21 0 80.1 10.13 114.32 28.01.7-7.37 1.07-14.83 1.07-22.38 0-130.35-106.05-236.41-236.41-236.41s-236.4 106.06-236.4 236.41c0 7.55.37 15.01 1.07 22.38 34.22-17.88 73.11-28.01 114.32-28.01 43.92 0 85.2 11.51 121.01 31.65z"/>
    <path class="${opts.classes.panel_b}" d="M242.04 489.71c0-9.58.57-19.02 1.63-28.32-62.22-36.54-107.15-99.46-119.33-173.29C56.57 329.71 11.26 404.52 11.26 489.71c0 130.35 106.05 236.41 236.41 236.41 39.61 0 76.96-9.81 109.79-27.09-69.31-43.96-115.42-121.35-115.42-209.32z"/>
    <path class="${opts.classes.panel_e}" d="M493.71 461.39c1.06 9.3 1.63 18.74 1.63 28.32 0 87.97-46.11 165.36-115.42 209.31 32.83 17.29 70.18 27.09 109.79 27.09 130.35 0 236.41-106.05 236.41-236.41 0-85.19-45.3-160-113.07-201.61-12.18 73.84-57.11 136.76-119.34 173.3z"/>
    <path class="${opts.classes.overlaps}" d="M379.92 280.4c58.46 37.07 100.4 97.94 112.1 168.88 58.49-35.91 100.22-96.54 110.57-167.24-33.56-18.32-72.03-28.74-112.88-28.74-39.61 0-76.96 9.81-109.79 27.1zM484.08 489.71c0-7.55-.37-15.01-1.07-22.38-34.22 17.88-73.11 28.01-114.32 28.01s-80.1-10.13-114.32-28.01c-.7 7.37-1.07 14.83-1.07 22.38 0 86.16 46.33 161.68 115.39 203 69.05-41.32 115.39-116.84 115.39-203z"/>
    <path class="${opts.classes.center}" d="M368.69 286.7c-59.7 35.72-102.4 97.01-112.88 168.64 33.56 18.32 72.03 28.74 112.88 28.74 40.85 0 79.32-10.42 112.88-28.74-10.48-71.62-53.18-132.91-112.88-168.64z""/>
    <path class="${opts.classes.outlines_and_letters}" d="M243.67 461.39c.47-4.07 1.03-8.11 1.69-12.11-58.49-35.91-100.22-96.54-110.57-167.24a240.55 240.55 0 00-10.45 6.06c12.17 73.83 57.11 136.75 119.33 173.29zM492.02 449.28c.66 4.01 1.22 8.05 1.69 12.11 62.22-36.54 107.15-99.46 119.33-173.29-3.43-2.11-6.91-4.13-10.45-6.06-10.34 70.69-52.08 131.33-110.57 167.24zM368.69 484.08c-40.85 0-79.32-10.42-112.88-28.74-.58 3.96-1.06 7.96-1.44 11.99 34.22 17.88 73.11 28.01 114.32 28.01s80.1-10.13 114.32-28.01c-.38-4.03-.86-8.02-1.44-11.99-33.56 18.32-72.03 28.74-112.88 28.74zM368.69 286.7c-3.68-2.2-7.43-4.3-11.23-6.31-58.46 37.07-100.4 97.94-112.1 168.88 3.43 2.11 6.91 4.13 10.45 6.06 10.48-71.61 53.18-132.9 112.88-168.63z"/>
    <path class="${opts.classes.outlines_and_letters}" d="M368.69 273.69c3.81 2.14 7.55 4.37 11.23 6.71 32.83-17.29 70.18-27.09 109.79-27.09 40.85 0 79.32 10.42 112.88 28.74.58-3.96 1.06-7.96 1.44-11.99-34.22-17.88-73.11-28.01-114.32-28.01-43.93-.01-85.21 11.5-121.02 31.64zM253.3 489.71c0-7.55.37-15.01 1.07-22.38-3.62-1.89-7.19-3.87-10.7-5.94a249.86 249.86 0 00-1.63 28.32c0 87.97 46.11 165.36 115.42 209.31 3.81-2 7.55-4.11 11.23-6.31-69.05-41.32-115.39-116.84-115.39-203z"/>
    <path class="${opts.classes.outlines_and_letters}" d="M245.36 449.28c-.66 4.01-1.22 8.05-1.69 12.11 3.51 2.06 7.08 4.04 10.7 5.94.38-4.03.86-8.02 1.44-11.99a240.55 240.55 0 01-10.45-6.06zM602.59 282.04c3.54 1.93 7.02 3.96 10.45 6.06.66-4.01 1.22-8.05 1.69-12.11-3.51-2.06-7.08-4.04-10.7-5.94-.38 4.03-.86 8.02-1.44 11.99zM495.34 489.71c0-9.58-.57-19.02-1.63-28.32-3.51 2.06-7.08 4.04-10.7 5.94.7 7.37 1.07 14.83 1.07 22.38 0 86.16-46.33 161.68-115.39 203 3.68 2.2 7.43 4.3 11.23 6.31 69.31-43.95 115.42-121.34 115.42-209.31zM379.92 280.4c-3.81 2-7.55 4.11-11.23 6.31 59.7 35.72 102.4 97.01 112.88 168.64 3.54-1.93 7.02-3.96 10.45-6.06-11.7-70.95-53.63-131.82-112.1-168.89zM357.46 280.4c3.68-2.33 7.43-4.57 11.23-6.71-35.81-20.14-77.09-31.65-121.02-31.65-41.21 0-80.1 10.13-114.32 28.01.38 4.03.86 8.02 1.44 11.99 33.56-18.32 72.03-28.74 112.88-28.74 39.61 0 76.96 9.81 109.79 27.1z"/>
    <path class="${opts.classes.outlines_and_letters}" d="M483.01 467.33c3.62-1.89 7.19-3.87 10.7-5.94-.47-4.07-1.03-8.11-1.69-12.11-3.43 2.11-6.91 4.13-10.45 6.06.58 3.97 1.06 7.96 1.44 11.99zM134.79 282.04c-.58-3.96-1.06-7.96-1.44-11.99-3.62 1.89-7.19 3.87-10.7 5.94.47 4.07 1.03 8.11 1.69 12.11 3.43-2.1 6.91-4.13 10.45-6.06zM379.92 280.4a253.97 253.97 0 00-11.23-6.71c-3.81 2.14-7.55 4.37-11.23 6.71 3.81 2 7.55 4.11 11.23 6.31 3.68-2.21 7.43-4.31 11.23-6.31zM368.69 692.71c-3.68 2.2-7.43 4.3-11.23 6.31 3.68 2.33 7.43 4.57 11.23 6.71 3.81-2.14 7.55-4.37 11.23-6.71-3.8-2-7.55-4.1-11.23-6.31z"/>
    <g>
        <g class="${opts.classes.letter_opacity}">
            <path class="${opts.classes.outlines_and_letters}" d="M553.29 482.78h89.5v14.52h-72.26v41.21h67.35v14.52h-67.35v44.84h72.8v14.52h-90.05V482.78z"/>
        </g>
        <path class="${opts.classes.outlines_and_letters}" d="M614.73 275.99c-.47 4.07-1.03 8.11-1.69 12.11 67.77 41.61 113.07 116.42 113.07 201.61 0 130.35-106.05 236.41-236.41 236.41-39.61 0-76.96-9.81-109.79-27.09a253.97 253.97 0 01-11.23 6.71c35.81 20.14 77.09 31.65 121.02 31.65 136.57 0 247.67-111.11 247.67-247.67.01-91-49.32-170.68-122.64-213.73z"/>
    </g>
    <g>
        <g class="${opts.classes.letter_opacity}">
            <path class="${opts.classes.outlines_and_letters}" d="M106.06 482.78h47.02c2.91 0 5.93.03 9.08.09 3.15.06 6.26.25 9.35.55 3.09.3 6.02.76 8.8 1.36 2.78.61 5.14 1.51 7.08 2.72 4.24 2.54 7.84 6.08 10.8 10.62 2.96 4.54 4.45 10.02 4.45 16.43 0 6.9-1.7 12.86-5.08 17.88-3.39 5.02-8.11 8.75-14.16 11.17v.36c7.99 1.7 14.1 5.33 18.34 10.89 4.24 5.57 6.35 12.34 6.35 20.33 0 4.72-.85 9.32-2.54 13.8-1.7 4.48-4.21 8.44-7.53 11.89-3.33 3.45-7.44 6.23-12.34 8.35-4.9 2.12-10.56 3.18-16.98 3.18h-62.63V482.78zm17.25 55.73h34.5c9.8 0 16.85-1.73 21.15-5.17 4.29-3.45 6.44-8.62 6.44-15.52 0-4.48-.73-8.08-2.18-10.8-1.45-2.72-3.45-4.81-5.99-6.26-2.54-1.45-5.48-2.39-8.8-2.81-3.33-.42-6.87-.64-10.62-.64h-34.5v41.2zm0 59.37h43.21c7.5 0 13.44-2.09 17.79-6.26 4.36-4.18 6.54-9.83 6.54-16.98 0-4.24-.79-7.74-2.36-10.53-1.57-2.78-3.66-4.99-6.26-6.63-2.6-1.63-5.6-2.78-8.99-3.45-3.39-.66-6.9-1-10.53-1h-39.4v44.85z"/>
        </g>
        <path class="${opts.classes.outlines_and_letters}" d="M247.67 726.12c-130.35 0-236.41-106.05-236.41-236.41 0-85.19 45.3-160 113.07-201.61-.66-4.01-1.22-8.05-1.69-12.11C49.33 319.04 0 398.72 0 489.71c0 136.57 111.11 247.67 247.67 247.67 43.93 0 85.21-11.51 121.02-31.65-3.81-2.14-7.55-4.37-11.23-6.71-32.83 17.29-70.18 27.1-109.79 27.1z"/>
    </g>
    <g>
        <g class="${opts.classes.letter_opacity}">
            <path class="${opts.classes.outlines_and_letters}" d="M306.6 129.67c0-8.83 1.3-17.34 3.91-25.51 2.6-8.17 6.5-15.4 11.71-21.69 5.2-6.29 11.68-11.32 19.43-15.07 7.74-3.75 16.76-5.63 27.05-5.63s19.3 1.88 27.05 5.63c7.74 3.75 14.22 8.78 19.43 15.07 5.2 6.29 9.1 13.52 11.71 21.69 2.6 8.17 3.9 16.68 3.9 25.51 0 8.84-1.3 17.34-3.9 25.51-2.61 8.17-6.51 15.4-11.71 21.7-5.21 6.29-11.68 11.32-19.43 15.07s-16.76 5.63-27.05 5.63-19.31-1.88-27.05-5.63c-7.75-3.75-14.22-8.77-19.43-15.07-5.21-6.29-9.11-13.53-11.71-21.7-2.61-8.17-3.91-16.67-3.91-25.51zm17.25 0c0 6.53.84 12.98 2.54 19.34 1.69 6.35 4.36 12.07 7.99 17.16 3.63 5.08 8.29 9.17 13.98 12.25 5.69 3.09 12.46 4.63 20.33 4.63 7.87 0 14.64-1.54 20.33-4.63s10.35-7.17 13.98-12.25c3.63-5.08 6.29-10.8 7.99-17.16 1.69-6.35 2.54-12.8 2.54-19.34 0-6.54-.85-12.98-2.54-19.34-1.7-6.35-4.36-12.07-7.99-17.16-3.63-5.08-8.29-9.17-13.98-12.25-5.69-3.09-12.47-4.63-20.33-4.63-7.87 0-14.65 1.54-20.33 4.63-5.69 3.09-10.35 7.17-13.98 12.25-3.63 5.08-6.29 10.8-7.99 17.16-1.7 6.36-2.54 12.8-2.54 19.34z"/>
        </g>
        <path class="${opts.classes.outlines_and_letters}" d="M132.29 247.67c0-130.35 106.05-236.41 236.41-236.41s236.4 106.06 236.4 236.41c0 7.55-.37 15.01-1.07 22.38 3.62 1.89 7.19 3.87 10.7 5.94 1.06-9.3 1.63-18.74 1.63-28.32C616.36 111.1 505.26 0 368.69 0S121.02 111.1 121.02 247.67c0 9.58.57 19.02 1.63 28.32 3.51-2.06 7.08-4.04 10.7-5.94a239.94 239.94 0 01-1.06-22.38z"/>
    </g>
</svg>
`;

        // return the new element node
        return output;

    }

    insert_into (el, options = false) {
        
        let svg = this.generate(options);
        el.innerHTML += svg;
    
    }
    
}